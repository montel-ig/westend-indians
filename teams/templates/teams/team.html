{% extends "base_layout.html" %}

{% load wagtailcore_tags %}
{% load staticfiles %}
{% load wagtailimages_tags %}

{% block body_css_class %}team_page{% endblock %}

{% block title %} {{ properties.name }} {% endblock %}

{% block slogan %}Once a member - always part of the tribe{% endblock %}

{% block main %}
  <img class="triangle flip-x justify-bottom" src="{% static "images/tilted-bg-black-bottom.svg" %}">
  <section class="team" style="background-color: white;">
    <div class="teams-team-container"}>
      <h1>{{ properties.name }}</h1>
      {% if properties.image %}
        <img class="teams-team-img" src="{{ properties.image }}">
      {% else %}
        <img id="default" src="{% static 'images/logo.png' %}" />
      {% endif %}
      <div class="content team">
        <div class="team-contact">
          {% if properties.contact_name %}
            <h2>Urheiluvastaava</h2>
            <p>{{ properties.contact_name }}</p>
          {% endif %}
          {% if properties.contact_email %}
            <p>{{ properties.contact_email }}</p>
          {% endif %}
          {% if properties.contact_phone %}
            <p>{{ properties.contact_phone }}</p>
          {% endif %}
        </div>
        <div class="team-leader">
          {% if properties.leader_name %}
            <h2>Joukkueenjohtaja</h2>
            <p>{{ properties.leader_name }}</p>
          {% endif %}
          {% if properties.leader_email %}
            <p>{{ properties.leader_email }}</p>
          {% endif %}
          {% if properties.leader_phone %}
            <p>{{ properties.leader_phone }}</p>
          {% endif %}
        </div>
        {% if properties.registration_link %}
          <div class="signup">
            <a href="{{ properties.registration_link }}" target="_blank"><button>Liity mukaan</button></a>
          </div>
        {% endif %}
        <div class="team-info">
          {% if properties.current_player_count and properties.max_player_count %}
            <p>Nykyinen pelaajamäärä: {{ properties.current_player_count }}/{{ properties.max_player_count }}</p>
          {% endif %}
        </div>
      </div>
      <div class="team-description">
        <p>{{ properties.description|safe }}</p>
      </div>
    </div>
  </section>
  {% if members|length > 10  %}
    <img class="triangle flip-y justify-top" src="{% static "images/tilted-bg-black-top.svg" %}">
    <section class="players" id="players">
      <div class="players-container">
      </div>
    </section>
  <img class="triangle flip-x justify-bottom" src="{% static "images/tilted-bg-black-bottom.svg" %}">
  {% endif %}

  <script type="application/javascript">
    var team_members = {{ members|safe }} ;
    window.onload = function() {
      if(document.getElementById("players")!=null && team_members){
        createPlayerBrowser("players");
      }
    }
  </script>
{% endblock %}

{% block footer %}
  {% include "footer.html" with sponsor_items=sponsors %}
{% endblock %}



