{% load wagtailcore_tags %}
{% load staticfiles %}
{% load wagtailimages_tags %}

{% if page.lift_count == 3 %}
  {% if page.pinnalla %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla }}">
      <a href="{{ page.pinnalla_link }}">
        {% image page.pinnalla width-350 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
  {% if page.pinnalla2 %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla2 }}">
      <a href="{{ page.pinnalla2_link }}">
        {% image page.pinnalla2 width-350 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
  {% if page.pinnalla3 %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla3 }}">
      <a href="{{ page.pinnalla3_link }}">
        {% image page.pinnalla3 width-350 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
{% elif page.lift_count == 2 %}
  {% if page.pinnalla %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla }}">
      <a href="{{ page.pinnalla_link }}">
        {% image page.pinnalla width-750 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
  {% if page.pinnalla2 %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla2 }}">
      <a href="{{ page.pinnalla2_link }}">
        {% image page.pinnalla2 width-750 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
  {% if page.pinnalla3 %}
    <div class="lift-img" data-analytics-label="{{ page.pinnalla3 }}">
      <a href="{{ page.pinnalla3_link }}">
        {% image page.pinnalla3 width-750 height='auto' width='auto' %}
      </a>
    </div>
  {% endif %}
{% elif page.lift_count == 1 %}
  {% if page.pinnalla %}
  <div class="lift-img" data-analytics-label="{{ page.pinnalla }}">
    <a href="{{ page.pinnalla_link }}">
      {% image page.pinnalla width-1280 height='auto' width='auto' %}
    </a>
  </div>
  {% endif %}
  {% if page.pinnalla2 %}
  <div class="lift-img" data-analytics-label="{{ page.pinnalla2 }}">
    <a href="{{ page.pinnalla2_link }}">
      {% image page.pinnalla2 width-1280 height='auto' width='auto' %}
    </a>
  </div>
  {% endif %}
  {% if page.pinnalla3 %}
  <div class="lift-img" data-analytics-label="{{ page.pinnalla3 }}">
    <a href="{{ page.pinnalla3_link }}">
      {% image page.pinnalla3 width-1280 height='auto' width='auto' %}
    </a>
  </div>
  {% endif %}
{% endif %}

{% if page.lift_count > 1 %}
  <script type="text/javascript">
    var lifts = document.querySelectorAll('.lift-img')
    for(var i = 0; i < lifts.length; i++) {
      var lift = lifts[i]
      lift.onclick = function(e) {
        // find the actual data container
        var elem = e.target
        while(elem.nodeName !== 'DIV') {
          elem = elem.parentNode
        }
        var label = elem.dataset['analyticsLabel']
        ga('send', 'event', 'Pinnalla', 'click', label)
      }
    }
  </script>
{% endif %}